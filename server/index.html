<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fridge watcher</title>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

</head>
<body>

<div id="chat"></div>
<button id="askForData">Demander les données</button>

</body>
</html>

<script type="javascript">
    var chat = document.getElementById('chat');
    var server = ('10.31.0.223:8080');
    var socket = io.connect(server);
    var button = document.getElementById('askForData');
    console.log('ok');

    button.addEventListener('click', function(event){
        console.log('Bouton cliqué');
        socket.emit('askForData');

    });


    socket.on('sensorStats', function(data){

        for (datas in data)
        {
            var parag = document.createElement("p");
            parag.classList.add('post');
            parag.appendChild(document.createTextNode("[" + datas.name + "]" + datas.temperature + " : " + datas.time));
            chat.appendChild(parag);

            console.log(data.name + data.temperature + data.time);
        }
    });

</script>